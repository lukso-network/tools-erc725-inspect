(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[292],{38716:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/lsp4-metadata-encoder",function(){return a(90359)}])},47790:()=>{},80236:()=>{},88306:()=>{},90359:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(37876),n=a(77328),l=a.n(n),i=a(14232),r=a(69241),o=a(31793),d=a.n(o),c=a(62904),p=a(45957),x=a(20539),u=a(53446),h=a(82909).Buffer;let m=new p.Ay(x),g=h.from("Y2hpZTZwaGUxb29naDhpZVp1b2szZXNoaWV4YWhTaDF6YWk2c2hhaHNoYWhwaHVlR2F6b3RhZTJqb3VyNWViYQ==\n","base64").toString(),j=e=>{let{file:t,inputText:a,choose:n}=e;return(0,s.jsx)("div",{className:"file has-name is-right is-fullwidth",children:(0,s.jsxs)("label",{className:"file-label",children:[(0,s.jsx)("input",{className:"file-input",type:"file",name:"",onChange:n}),(0,s.jsx)("span",{className:"file-cta",children:(0,s.jsx)("span",{className:"file-label",children:"Choose file"})}),(0,s.jsx)("span",{className:"file-name",children:t?t.name:a})]})})},b=e=>{let{file:{image:t,name:a,type:n},remove:l,addToList:i}=e;return(0,s.jsxs)("div",{style:{width:"100%",padding:0,margin:"20px 0px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t?(0,s.jsx)("img",{alt:"",src:t,style:{padding:0,maxWidth:"50px"}}):(0,s.jsx)("div",{style:{maxWidth:"50px"},children:(0,s.jsx)("p",{children:"Upload file"})}),(0,s.jsx)("p",{children:a}),i?(0,s.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,s.jsx)("button",{className:"button is-dark",onClick:i,children:"Add to list"}),(0,s.jsx)("button",{className:"button is-dark",onClick:l,children:"Remove"})]}):(0,s.jsx)("button",{className:"button is-dark",onClick:l,children:"Remove"})]})},y=e=>{let{selectedType:t,onChange:a}=e,[n,l]=(0,i.useState)(!1),[o,d]=(0,i.useState)(t);return(0,s.jsxs)("div",{className:(0,r.A)("dropdown",n&&"is-active"),children:[(0,s.jsx)("div",{className:"dropdown-trigger",children:(0,s.jsxs)("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu",onClick:()=>l(!n),children:[(0,s.jsx)("span",{children:o||"Type"}),(0,s.jsx)("span",{className:"file-icon",style:{margin:"0 0 0 16px"},children:"Choose file"})]})}),(0,s.jsx)("div",{className:"dropdown-menu",id:"dropdown-menu",role:"menu",children:(0,s.jsxs)("div",{className:"dropdown-content",style:{background:"#F0F0F0"},children:[(0,s.jsx)("button",{className:"dropdown-item",style:{border:"none"},onClick:()=>(a("string"),d("string"),l(!1)),children:"String"}),(0,s.jsx)("button",{className:"dropdown-item",style:{border:"none"},onClick:()=>(a("number"),d("number"),l(!1)),children:"Number"}),(0,s.jsx)("button",{className:"dropdown-item",style:{border:"none"},onClick:()=>(a("boolean"),d("boolean"),l(!1)),children:"Boolean"})]})})]})},f=()=>{let e=new u.U7("https://api.universalprofile.cloud/api/v0/add",g),[t,a]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[o,p]=(0,i.useState)([{title:"",url:""}]),[x,f]=(0,i.useState)([{key:"",value:"",type:""}]),[v,k]=(0,i.useState)([]),[w,N]=(0,i.useState)(),[D,C]=(0,i.useState)([]),[S,A]=(0,i.useState)(),[F,T]=(0,i.useState)([]),[_,U]=(0,i.useState)(),[W,B]=(0,i.useState)(0),[E,L]=(0,i.useState)(""),R=async e=>{var t;if(null==(t=e.target.files)?void 0:t.length){let t=e.target.files[0],{name:a,type:s}=t,n=await t.arrayBuffer(),l=h.from(n);return{name:a,type:s,hash:(0,c.keccak256)("0x".concat(l.toString("hex"))),buffer:l}}},Y=async e=>{let t=await R(e);if(t){let{name:e,type:a,hash:s,buffer:n}=t;if(!a.startsWith("image/"))return;let l="data:".concat(a,";base64,").concat(n.toString("base64")),{height:i,width:r}=d()(new Uint8Array(n));if(!i||!r)return;N({name:e,type:a,hash:s,buffer:n,image:l,width:r,height:i})}},I=async e=>{let t=await R(e);if(t){let{name:e,type:a,hash:s,buffer:n}=t;if(!a.startsWith("image/"))return;let l="data:".concat(a,";base64,").concat(n.toString("base64")),{height:i,width:r}=d()(new Uint8Array(n));if(!i||!r)return;A({name:e,type:a,hash:s,buffer:n,image:l,width:r,height:i})}},P=async e=>{let t=await R(e);if(t){let{name:e,type:a,hash:s,buffer:n}=t;U({name:e,type:a,hash:s,buffer:n})}},V=async()=>{if(!g)return void console.error("SHARED_KEY environment variable is not set");B(1);let a=[];for(let{buffer:t,width:s,height:n}of v){let{url:l,hash:i}=await e.upload(new Blob([new Uint8Array(t)]));a.push({width:s,height:n,url:l,verification:{method:"keccak256(bytes)",data:i}})}let s=[];for(let{buffer:t,width:a,height:n}of D){let{url:l,hash:i}=await e.upload(new Blob([new Uint8Array(t)]));s.push({width:a,height:n,url:l,verification:{method:"keccak256(bytes)",data:i}})}let l=[];for(let t of F){let{url:a,hash:s}=await e.upload(new Blob([new Uint8Array(t.buffer)]));l.push({url:a,verification:{method:"keccak256(bytes)",data:s}})}let i={LSP4Metadata:{name:t,description:n,links:o.filter(e=>{let{title:t,url:a}=e;return t&&a}),attributes:x.filter(e=>{let{key:t,value:a,type:s}=e;return t&&a&&s}),icon:a,images:[s],assets:l}},{url:r}=await e.upload(new Blob([new Uint8Array(h.from(JSON.stringify(i)))])),{values:d}=m.encodeData([{keyName:"LSP4Metadata",value:{json:i,url:r}}]);console.log(d),L(d[0]),B(2)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:"LSP4 Metadata - ERC725 Tools"})}),(0,s.jsxs)("div",{className:"container is-fullwidth",children:[(0,s.jsx)("input",{className:"input mb-2",type:"text",placeholder:"name",onChange:e=>a(e.target.value)}),(0,s.jsx)("textarea",{className:"textarea is-fullwidth",placeholder:"description",onChange:e=>r(e.target.value)}),(0,s.jsx)("div",{style:{border:"1px solid #D3D3D3",margin:"20px 0px"}}),(0,s.jsx)("p",{className:"mb-2",children:"Links"}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:o.map((e,t)=>{let{title:a,url:n}=e;return(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,s.jsx)("input",{className:"input",type:"text",placeholder:"link title",onChange:e=>{o[t].title=e.target.value,p(o)}}),(0,s.jsx)("input",{className:"input",type:"text",placeholder:"link url",onChange:e=>{o[t].url=e.target.value,p(o)}}),t===o.length-1?(0,s.jsx)("button",{style:{border:"none",background:"transparent",cursor:"pointer"},onClick:()=>o[o.length-1].title&&o[o.length-1].url?p([...o,{title:"",url:""}]):null,children:"Add item"}):(0,s.jsx)("button",{style:{border:"none",background:"transparent",cursor:"pointer"},onClick:()=>p(o.filter(e=>e.title!==a&&e.url!==n)),children:"Add item"})]},t)})}),(0,s.jsx)("div",{style:{border:"1px solid #D3D3D3",margin:"20px 0px"}}),(0,s.jsx)("p",{className:"mb-2",children:"Attributes"}),(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:x.map((e,t)=>{let{key:a,value:n,type:l}=e;return(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,s.jsx)("input",{className:"input",type:"text",placeholder:"attribute kind",onChange:e=>{x[t].key=e.target.value,f(x)}}),(0,s.jsx)("input",{className:"input",type:"text",placeholder:"attribute name",onChange:e=>{x[t].value=e.target.value,f(x)}}),(0,s.jsx)(y,{selectedType:x[t].type,onChange:e=>{x[t].type=e,f(x)}}),t===x.length-1?(0,s.jsx)("button",{style:{border:"none",background:"transparent",cursor:"pointer"},onClick:()=>x[x.length-1].key&&x[x.length-1].value&&x[x.length-1].type?f([...x,{key:"",value:"",type:""}]):null,children:"Add attribute"}):(0,s.jsx)("button",{style:{border:"none",background:"transparent",cursor:"pointer"},onClick:()=>f(x.filter(e=>e.key!==a&&e.value!==n&&e.type!==l)),children:"Add"})]},t)})}),(0,s.jsx)("div",{style:{border:"1px solid #D3D3D3",margin:"20px 0px"}}),(0,s.jsx)("p",{className:"mb-2",children:"Icon"}),(0,s.jsx)(j,{file:w,inputText:"Choose an icon…",choose:Y}),w&&w.image?(0,s.jsx)(b,{file:w,addToList:()=>(k([...v,w]),N(void 0)),remove:()=>N(void 0)}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("div",{style:{border:"1px solid #D3D3D3",margin:"20px 0px"}}),v.map(e=>(0,s.jsx)(b,{file:e,remove:()=>k(v.filter(t=>{let{hash:a}=t;return a!==e.hash}))},e.hash)),v.length>0?(0,s.jsx)("div",{style:{border:"1px solid #D3D3D3",margin:"20px 0px"}}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("p",{className:"mb-2",children:"Images"}),(0,s.jsx)(j,{file:S,inputText:"Choose an image…",choose:I}),S&&S.image?(0,s.jsx)(b,{file:S,addToList:()=>(C([...D,S]),A(void 0)),remove:()=>A(void 0)}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("div",{style:{border:"1px solid #D3D3D3",margin:"20px 0px"}}),D.map(e=>(0,s.jsx)(b,{file:e,remove:()=>C(D.filter(t=>{let{hash:a}=t;return a!==e.hash}))},e.hash)),D.length>0?(0,s.jsx)("div",{style:{border:"1px solid #D3D3D3",margin:"20px 0px"}}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("p",{className:"mb-2",children:"Assets"}),(0,s.jsx)(j,{file:_,inputText:"Choose an asset…",choose:P}),_?(0,s.jsx)(b,{file:_,addToList:()=>(T([...F,_]),U(void 0)),remove:()=>U(void 0)}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("div",{style:{border:"1px solid #D3D3D3",margin:"20px 0px"}}),F.map(e=>(0,s.jsx)(b,{file:e,remove:()=>T(F.filter(t=>{let{hash:a}=t;return a!==e.hash}))},e.hash)),F.length>0?(0,s.jsx)("div",{style:{border:"1px solid #D3D3D3",margin:"20px 0px"}}):(0,s.jsx)(s.Fragment,{}),0===W?(0,s.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"20px 0px"},children:(0,s.jsx)("button",{className:"button is-dark",onClick:V,children:"Upload metadata"})}):1===W?(0,s.jsx)("progress",{className:"progress is-small is-primary",max:"100",children:"15%"}):2===W?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("pre",{style:{width:"100%",textAlign:"center",overflow:"hidden",textWrap:"balance",wordBreak:"break-all"},children:E}),(0,s.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"20px 0px"},children:(0,s.jsx)("button",{className:"button is-dark",onClick:()=>{a(""),r(""),p([{title:"",url:""}]),f([{key:"",value:"",type:""}]),k([]),N(void 0),C([]),A(void 0),T([]),U(void 0),B(0),L("")},children:"Reset"})})]}):(0,s.jsx)(s.Fragment,{})]})]})}}},e=>{e.O(0,[80,957,87,115,636,593,792],()=>e(e.s=38716)),_N_E=e.O()}]);