(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[422],{43492:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>_});var t=s(37876),n=s(14232),l=s(77328),r=s.n(l),c=s(89099),i=s(57512),d=s(45957),o=s(13657),u=s(82893),h=s(9833),p=s(36397),y=s(86105),m=s(61444),v=s(20539),x=s(57018),f=s(91751),b=s(80551);let j=JSON.parse('[{"name":"SupportedStandards:LSP9Vault","key":"0xeafec4d89fa9619884b600007c0334a14085fefa8b51ae5a40895018882bdb90","keyType":"Mapping","valueType":"bytes4","valueContent":"0x7c0334a1"},{"name":"LSP1UniversalReceiverDelegate","key":"0x0cfc51aec37c55a4d0b1a65c6255c4bf2fbdf6277f3cc0730c45b828b6db8b47","keyType":"Singleton","valueType":"address","valueContent":"Address"},{"name":"LSP1UniversalReceiverDelegate:<bytes32>","key":"0x0cfc51aec37c55a4d0b10000<bytes32>","keyType":"Mapping","valueType":"address","valueContent":"Address"},{"name":"LSP17Extension:<bytes4>","key":"0xcee78b4094da860110960000<bytes4>","keyType":"Mapping","valueType":"address","valueContent":"Address"}]');var g=s(62564),k=s(25764);let S=JSON.parse('[{"name":"LSP17Extension:<bytes4>","key":"0xcee78b4094da860110960000<bytes4>","keyType":"Mapping","valueType":"address","valueContent":"Address"}]');var N=s(32029),w=s(5843),E=s(62132),C=s(79023);let P="0x724141d9918ce69e6b8afcf53a91748466086ba2c74b94cab43c649ae2ac23ff",T=[...y.map(e=>{let{name:a,key:s}=e;return{name:a,key:s,icon:"\uD83D\uDCE2"}}),...m.map(e=>{let{name:a,key:s}=e;return{name:a,key:s,icon:"\uD83D\uDC64"}}),...v.map(e=>{let{name:a,key:s}=e;return{name:a,key:s,icon:"\uD83D\uDD35"}}),...x.map(e=>{let{name:a,key:s}=e;return{name:a,key:s,icon:"\uD83D\uDCB0"}}),...f.map(e=>{let{name:a,key:s}=e;return{name:a,key:s,icon:"\uD83D\uDD11"}}),...b.map(e=>{let{name:a,key:s}=e;return{name:a,key:s,icon:"\uD83D\uDDBC️"}}),...j.map(e=>{let{name:a,key:s}=e;return{name:a,key:s,icon:"\uD83D\uDD12"}}),...g.map(e=>{let{name:a,key:s}=e;return{name:a,key:s,icon:"\uD83D\uDD12"}}),...k.map(e=>{let{name:a,key:s}=e;return{name:a,key:s,icon:"\uD83D\uDDBC️"}}),...S.map(e=>{let{name:a,key:s}=e;return{name:a,key:s,icon:"\uD83D\uDC8E"}}),{name:"LSP28TheGrid",key:P,icon:"\uD83C\uDF10"}],_=()=>{let[e,a]=(0,n.useState)(""),[s,l]=(0,n.useState)(""),[_,R]=(0,n.useState)(T[0].key),[L,A]=(0,n.useState)(""),[D,Y]=(0,n.useState)(""),[U,X]=(0,n.useState)(""),[O,V]=(0,n.useState)(void 0),[M,F]=(0,n.useState)({isErc725X:!1,isErc725Y:!1}),[G,J]=(0,n.useState)(),q=(0,c.useRouter)(),{network:I}=(0,n.useContext)(o.u),K=[...y,...m,...v,...x,...f,...b,...j,...g,...k,...S,{name:"LSP28TheGrid",key:P,keyType:"Singleton",valueType:"bytes",valueContent:"VerifiableURI"}];(0,n.useEffect)(()=>{let e=q.query.address,s=q.query.dataKey;e&&"string"==typeof e&&a(e),s&&"string"==typeof s&&R(s)},[q.query]);let B=(e,a)=>{let s=new URL(window.location.href);s.searchParams.set("address",e),s.searchParams.set("datakey",a),q.replace(s.href,void 0,{shallow:!0})},W=async e=>{if(a(e),Y(""),B(e,_),!(0,i.P)(e)&&0!==e.length){l("The address is not valid"),F({isErc725X:!1,isErc725Y:!1});return}"0x"!==e.slice(0,2)&&0!==e.length&&a("0x".concat(e)),l(""),I&&F(await (0,w.S)(e,I))},z=a=>{if(R(a),Y(""),B(e,a),64!==a.length&&66!==a.length||66===a.length&&"0x"!==a.slice(0,2))return void A("The data key is not valid");"0x"!==a.slice(0,2)&&R("0x".concat(a)),A("")},H=async()=>{if(!I||!G)return;if(!M.isErc725Y)return void console.log("Contract not compatible with ERC725");let a=await (0,N.b)(e,_,I);if(a){let e,s,t,n,l;if(Y(a),_===P)return void V({name:e="LSP28TheGrid",key:_,keyType:"Singleton",valueType:t="bytes",valueContent:n="VerifiableURI"});let r=(0,d._w)(_);if(!r){V(void 0),console.error("Unknown schema");return}if(console.log("foundSchema",r),{name:e,valueType:t,valueContent:n}=r,(0,d.ws)(e)){console.log("dynamicSchema",r);let{dynamicName:e,dynamicKeyParts:c}=r;V({name:e,key:_,keyType:s,valueType:t,valueContent:n}),console.log("dynamicKeyParts",c),l=G.decodeData([{keyName:r.name,dynamicKeyParts:c,value:a}])}else V(r),l=G.decodeData([{keyName:e,value:a}]);X("VerifiableURI"==n?JSON.stringify(l[0].value,null,4):l[0].value)}else Y("0x"),X("no data to decode \uD83E\uDD37")};return(0,n.useEffect)(()=>{J(new d.Ay(K,e,I.rpcUrl,{ipfsGateway:"".concat(C.Yy,"/")}))},[e,I]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r(),{children:(0,t.jsx)("title",{children:"getData - ERC725 Tools"})}),(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h2",{className:"title is-2",children:"Data Fetcher"}),(0,t.jsx)(p.A,{erc725jsMethod:"decodeData",description:(0,t.jsxs)(t.Fragment,{children:["Retrieve the value under a specific"," ",(0,t.jsx)("a",{href:C.d8.ERC725Y,target:"_blank",rel:"noreferrer",children:"ERC725Y"})," ","data key and decode it according to its known"," ",(0,t.jsxs)("a",{href:"".concat(C.d8.LSP2,"#valueContent"),target:"_blank",rel:"noreferrer",children:["LSP2 ",(0,t.jsx)("code",{children:"valueContent"})]})]})}),(0,t.jsx)("div",{className:"is-flex",children:(0,t.jsxs)("div",{className:"is-half",children:[(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{className:"label",children:"Contract Address"}),(0,t.jsxs)("div",{className:"control",children:[(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Enter a UP, LSP7 or LSP8 address",value:e,onChange:e=>W(e.target.value)}),(0,t.jsx)(h.A,{onClick:e=>W(e)})]}),""!==s&&(0,t.jsx)("p",{className:"help is-danger",children:s}),(M.isErc725X||M.isErc725Y)&&(0,t.jsxs)("p",{className:"help is-success mt-3",children:["ERC725X: ",M.isErc725X?"✅":"❌"," - ERC725Y"," ",M.isErc725Y?"✅":"❌"]})]}),(0,t.jsxs)("div",{className:"field",children:[(0,t.jsx)("label",{className:"label",children:"Data Key"}),(0,t.jsx)("div",{className:"select mb-4 is-fullwidth",children:(0,t.jsx)("select",{value:_,onChange:e=>z(e.target.value),className:"is-fullwidth",children:T.map((e,a)=>(0,t.jsxs)("option",{value:e.key,children:[e.icon," \xa0",e.name]},a))})}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{className:"control",children:(0,t.jsx)("input",{className:"input",type:"text",placeholder:y[0].key,value:_,onChange:e=>z(e.target.value)})}),""!==L&&(0,t.jsx)("p",{className:"help is-danger",children:L})]}),(0,t.jsx)("button",{className:"button is-primary",type:"button",disabled:""===e||""===_||""!==s||""!==L||!M.isErc725Y,onClick:H,children:"getData"})]})}),(0,t.jsx)("hr",{}),D&&(0,t.jsx)("div",{className:"is-full-width",children:O?(0,t.jsx)(u.A,{address:e,data:{key:_,value:D,schema:O}}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"columns is-vcentered my-2",children:[(0,t.jsx)("span",{className:"mr-3",children:"Encoded Value:"}),(0,t.jsx)("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap"},children:D})]}),(0,t.jsxs)("div",{className:"columns is-vcentered my-2",children:[(0,t.jsx)("span",{className:"mr-3",children:"Decoded Value"}),(0,t.jsx)("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap"},children:_.startsWith(E.e1["AddressPermissions:Permissions"])?JSON.stringify(d.Ay.decodePermissions(D),void 0,2):U})]})]})})]})]})}},66200:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-fetcher",function(){return s(43492)}])}},e=>{e.O(0,[0,212,80,957,864,225,879,776,765,636,593,792],()=>e(e.s=66200)),_N_E=e.O()}]);