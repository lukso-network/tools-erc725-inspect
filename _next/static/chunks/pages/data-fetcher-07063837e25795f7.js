(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[675],{7205:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-fetcher",function(){return n(87347)}])},60926:function(e,t,n){"use strict";var a,r=n(85893),s=n(67294),i=n(53538),c=n(1438);!function(e){e.UP="UP",e.Asset="Asset"}(a||(a={}));t.Z=function(e){var t=e.onClick,n=(0,s.useContext)(i.J).network,u=function(e){var r="";switch(e){case a.UP:switch(n.name){case"MAINNET":r=c.XS.MAINNET_UP;break;case"TESTNET":r=c.XS.TESTNET_UP}break;case a.Asset:switch(n.name){case"MAINNET":r=c.XS.MAINNET_LSP7;break;case"TESTNET":r=c.XS.TESTNET_LS7}}t(r)};return(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{className:"button is-light is-small my-4",onClick:function(){return u(a.UP)},children:"Try with a Universal Profile Sample Address"}),(0,r.jsx)("button",{className:"button is-light is-small my-4 ml-2",onClick:function(){return u(a.Asset)},children:"Try with a Digital Asset Sample Address"})]})}},1438:function(e,t,n){"use strict";n.d(t,{J7:function(){return c},MX:function(){return l},XJ:function(){return i},XS:function(){return a},qU:function(){return s},uZ:function(){return r},wq:function(){return u}});var a,r=[{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],s=[{inputs:[{internalType:"bytes32",name:"dataKey",type:"bytes32"}],name:"getData",outputs:[{internalType:"bytes",name:"dataValue",type:"bytes"}],stateMutability:"view",type:"function"}],i=[{inputs:[{internalType:"bytes32[]",name:"dataKeys",type:"bytes32[]"}],name:"getDataBatch",outputs:[{internalType:"bytes[]",name:"dataValues",type:"bytes[]"}],stateMutability:"view",type:"function"}],c=[{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],u=[{inputs:[{components:[{internalType:"address",name:"target",type:"address"},{internalType:"bytes",name:"callData",type:"bytes"}],internalType:"struct Multicall3.Call[]",name:"calls",type:"tuple[]"}],name:"aggregate",outputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"},{internalType:"bytes[]",name:"returnData",type:"bytes[]"}],stateMutability:"payable",type:"function"}],l="0xcA11bde05977b3631167028862bE2a173976CA11";!function(e){e.MAINNET_UP="0x0F4180da178ed1C71398a57ca8Cb177F69591f1f",e.TESTNET_UP="0x027b6f7be4399727d4e0132c2cE027Cd3e015364",e.MAINNET_LSP7="0x8DA488C29FB873c9561cCF5FF44Dda6C1DedDC37",e.TESTNET_LS7="0x41b35F490EB6325001fC94E92C58b9d9CC61586D"}(a||(a={}))},9366:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(47568),r=n(97582),s=n(67294),i=n(37918),c=n.n(i),u=n(53538);function l(){var e=(0,s.useState)(),t=e[0],n=e[1],i=(0,s.useContext)(u.J).network;return(0,s.useEffect)((function(){var e=function(){var e=(0,a.Z)((function(){return(0,r.__generator)(this,(function(e){return[2,new(c())(i.rpc)]}))}));return function(){return e.apply(this,arguments)}}();e().then((function(e){n(e)}))}),[i]),t}},87347:function(e,t,n){"use strict";n.r(t);var a=n(47568),r=n(29815),s=n(97582),i=n(85893),c=n(9008),u=n.n(c),l=n(67294),o=n(18269),d=n(53655),h=n(88812),f=n(80333),p=n(77802),m=n(56517),y=n(49650),b=n(35694),v=n(70357),g=n(98884),k=n(25113),x=n(39758),N=n(44359),E=n(17274),w=n(9366),j=n(60926),C=n(1438),T=n(53538),S=n(11163),_=n(83485),P="0x724141d9918ce69e6b8afcf53a91748466086ba2c74b94cab43c649ae2ac23ff",Z=(0,r.Z)(f.map((function(e){return{name:e.name,key:e.key,icon:"\ud83d\udce2"}}))).concat((0,r.Z)(p.map((function(e){return{name:e.name,key:e.key,icon:"\ud83d\udc64"}}))),(0,r.Z)(m.map((function(e){return{name:e.name,key:e.key,icon:"\ud83d\udd35"}}))),(0,r.Z)(y.map((function(e){return{name:e.name,key:e.key,icon:"\ud83d\udcb0"}}))),(0,r.Z)(b.map((function(e){return{name:e.name,key:e.key,icon:"\ud83d\udd11"}}))),(0,r.Z)(v.map((function(e){return{name:e.name,key:e.key,icon:"\ud83d\uddbc\ufe0f"}}))),(0,r.Z)(g.map((function(e){return{name:e.name,key:e.key,icon:"\ud83d\udd12"}}))),(0,r.Z)(k.map((function(e){return{name:e.name,key:e.key,icon:"\ud83d\udd12"}}))),(0,r.Z)(x.map((function(e){return{name:e.name,key:e.key,icon:"\ud83d\uddbc\ufe0f"}}))),(0,r.Z)(N.map((function(e){return{name:e.name,key:e.key,icon:"\ud83d\udc8e"}}))),[{name:"LSP28TheGrid",key:P,icon:"\ud83c\udf10"}]);t.default=function(){var e=(0,l.useState)(""),t=e[0],n=e[1],c=(0,l.useState)(""),D=c[0],A=c[1],R=(0,l.useState)(Z[0].key),L=R[0],U=R[1],I=(0,l.useState)(""),X=I[0],M=I[1],B=(0,l.useState)(""),Y=B[0],J=B[1],V=(0,l.useState)(""),F=V[0],K=V[1],O=(0,l.useState)({isErc725X:!1,isErc725Y:!1}),q=O[0],G=O[1],z=(0,l.useState)(),W=z[0],H=z[1],Q=(0,l.useContext)(T.J).network,$=(0,S.useRouter)(),ee=(0,w.Z)(),te=(0,r.Z)(f).concat((0,r.Z)(p),(0,r.Z)(m),(0,r.Z)(y),(0,r.Z)(b),(0,r.Z)(v),(0,r.Z)(g),(0,r.Z)(k),(0,r.Z)(x),(0,r.Z)(N),[{name:"LSP28TheGrid",key:P,keyType:"Singleton",valueType:"bytes",valueContent:"VerifiableURI"}]);(0,l.useEffect)((function(){var e=$.query.address,t=$.query.dataKey;e&&"string"===typeof e&&n(e),t&&"string"===typeof t&&U(t)}),[$.query]);var ne=function(e,t){var n=new URL(window.location.href);n.searchParams.set("address",e),n.searchParams.set("datakey",t),$.replace(n.href,void 0,{shallow:!0})},ae=function(){var e=(0,a.Z)((function(e){var t;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return n(e),J(""),ne(e,L),(0,o.isAddress)(e)||0===e.length?("0x"!==e.slice(0,2)&&0!==e.length&&n("0x".concat(e)),A(""),ee?[4,(0,E.DE)(e,ee)]:[2]):(A("The address is not valid"),G({isErc725X:!1,isErc725Y:!1}),[2]);case 1:return t=a.sent(),G(t),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),re=function(e){U(e),J(""),ne(t,e),64!==e.length&&66!==e.length||66===e.length&&"0x"!==e.slice(0,2)?M("The data key is not valid"):("0x"!==e.slice(0,2)&&U("0x".concat(e)),M(""))},se=function(){var e=(0,a.Z)((function(){var e,n,a,r,i,c,u,l;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return ee&&W?q.isErc725Y?[4,(0,E.Yu)(t,L,ee)]:(console.log("Contract not compatible with ERC725"),[2]):[2];case 1:if(e=s.sent()){if(J(e),!(n=(0,d.J1)(L))&&L!==P)return[2];if(n)a=(c=n).name,r=c.valueType,i=c.valueContent;else{if(L!==P)return console.error("Unknown schema"),[2];a="LSP28TheGrid",r="bytes",i="VerifiableURI"}u=(0,d.MD)(a)?W.decodeData([{keyName:a,dynamicKeyParts:L.slice(26),value:e}]):W.decodeData([{keyName:a,value:e}]),l="VerifiableURI"==i||(0,_.isValidTuple)(r,i)?JSON.stringify(u[0].value,null,4):u[0].value,K(l)}else J("0x"),K("no data to decode \ud83e\udd37");return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){H(new d.ZP(te,t,null===ee||void 0===ee?void 0:ee.currentProvider,{ipfsGateway:"https://api.ipfs.lukso.network/ipfs/"}))}),[t,ee]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u(),{children:(0,i.jsx)("title",{children:"getData - ERC725 Tools"})}),(0,i.jsxs)("div",{className:"container",children:[(0,i.jsx)("h2",{className:"title is-2",children:"Data Fetcher"}),(0,i.jsxs)("div",{className:"tags has-addons",children:[(0,i.jsx)("span",{className:"tag is-dark",children:"Network"}),(0,i.jsx)("span",{className:"tag is-warning",children:Q.name})]}),(0,i.jsx)("article",{className:"message is-info",children:(0,i.jsxs)("div",{className:"message-body",children:[(0,i.jsxs)("p",{children:["Retrieve the encoded data stored under an",(0,i.jsx)("a",{href:"https://docs.lukso.tech/standards/universal-profile/lsp0-erc725account#erc725y---generic-key-value-store",target:"_blank",rel:"noreferrer",className:"mx-1",children:"ERC725Y"}),"data key."]}),(0,i.jsxs)("p",{children:["See the",(0,i.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md#valueContent",className:"mx-1",children:"LSP-2 ERC725YJSONSchema"}),"specification to know how this value is encoded/decoded."]})]})}),(0,i.jsx)("article",{className:"message",children:(0,i.jsxs)("div",{className:"message-body",children:["It\u2018s calling the",(0,i.jsx)("a",{href:"https://github.com/ERC725Alliance/ERC725/blob/develop/docs/ERC-725.md#getdata",target:"_blank",rel:"noreferrer",className:"mx-1",children:"getData"}),"function of the",(0,i.jsx)("a",{href:"https://docs.lukso.tech/standards/lsp-background/erc725#erc725y-generic-data-keyvalue-store",target:"_blank",rel:"noreferrer",className:"mx-1",children:"ERC725Y"}),"smart contract."]})}),(0,i.jsx)("div",{className:"is-flex",children:(0,i.jsxs)("div",{className:"is-half",children:[(0,i.jsxs)("div",{className:"field",children:[(0,i.jsx)("label",{className:"label",children:"Contract Address"}),(0,i.jsxs)("div",{className:"control",children:[(0,i.jsx)("input",{className:"input",type:"text",placeholder:C.XS.TESTNET_UP,value:t,onChange:function(e){return ae(e.target.value)}}),(0,i.jsx)(j.Z,{onClick:function(e){return ae(e)}})]}),""!==D&&(0,i.jsx)("p",{className:"help is-danger",children:D}),(q.isErc725X||q.isErc725Y)&&(0,i.jsxs)("p",{className:"help is-success mt-3",children:["ERC725X: ",q.isErc725X?"\u2705":"\u274c"," - ERC725Y"," ",q.isErc725Y?"\u2705":"\u274c"]})]}),(0,i.jsxs)("div",{className:"field",children:[(0,i.jsx)("label",{className:"label",children:"Data Key"}),(0,i.jsx)("div",{className:"select mb-4 is-fullwidth",children:(0,i.jsx)("select",{value:L,onChange:function(e){return re(e.target.value)},className:"is-fullwidth",children:Z.map((function(e,t){return(0,i.jsxs)("option",{value:e.key,children:[e.icon," \xa0",e.name]},t)}))})}),(0,i.jsx)("br",{}),(0,i.jsx)("div",{className:"control",children:(0,i.jsx)("input",{className:"input",type:"text",placeholder:f[0].key,value:L,onChange:function(e){return re(e.target.value)}})}),""!==X&&(0,i.jsx)("p",{className:"help is-danger",children:X})]}),(0,i.jsx)("button",{className:"button is-primary",type:"button",disabled:""===t||""===L||""!==D||""!==X||!q.isErc725Y,onClick:se,children:"getData"})]})}),(0,i.jsx)("hr",{}),Y&&(0,i.jsxs)("div",{className:"is-full-width",children:[(0,i.jsxs)("div",{className:"columns is-vcentered my-2",children:[(0,i.jsx)("span",{className:"mr-3",children:"Encoded Value:"}),(0,i.jsx)("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap"},children:Y})]}),(0,i.jsxs)("div",{className:"columns is-vcentered my-2",children:[(0,i.jsx)("span",{className:"mr-3",children:"Decoded Value"}),(0,i.jsx)("pre",{style:{wordBreak:"break-all",whiteSpace:"pre-wrap"},children:L.startsWith(h.UP.LSP6["AddressPermissions:Permissions"])?JSON.stringify(d.ZP.decodePermissions(Y),void 0,2):F})]})]})]})]})}},17274:function(e,t,n){"use strict";n.d(t,{DE:function(){return h},Yu:function(){return d},bo:function(){return y},gJ:function(){return b},iK:function(){return o}});var a=n(47568),r=n(97582),s=n(88812),i=n(54529),c=n(20744),u=n(1438),l=n(30733),o=function(){var e=(0,a.Z)((function(e,t,n){var a,s,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:a=new n.eth.Contract(u.XJ,e),s=[],r.label=1;case 1:return r.trys.push([1,3,,4]),[4,a.methods.getDataBatch(t).call()];case 2:return s=r.sent(),[3,4];case 3:return i=r.sent(),console.log(i.message),[3,4];case 4:return[2,s]}}))}));return function(t,n,a){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((function(e,t,n){var a,s,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:a=new n.eth.Contract(u.qU,e),s=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,a.methods.getData(t).call()];case 2:return s=r.sent(),[3,4];case 3:return i=r.sent(),console.log(i.message),[3,4];case 4:return[2,s]}}))}));return function(t,n,a){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((function(e,t){var n,a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,p(e,[s.Bj.ERC725X,s.Bj.ERC725Y,s.Bj.ERC1271,s.Bj.LSP0ERC725Account,s.Bj.LSP1UniversalReceiver,s.Bj.LSP6KeyManager,s.Bj.LSP9Vault,s.Bj.ERC721],t)];case 1:return n=r.sent(),[4,p(e,[i.hg["v0.12.0"],i.hg["v0.14.0"],i.z1,c.zD["v0.12.0"],c.zD["v0.14.0"],c.s1],t)];case 2:return a=r.sent(),[2,{isErc725X:n[0],isErc725Y:n[1],isErc1271:n[2],isLsp0Erc725Account:n[3],isLsp1UniversalReceiver:n[4],isLsp6KeyManager:n[5],isLsp7DigitalAsset:a[0]||a[1]||a[2],isLsp8IdentifiableDigitalAsset:a[3]||a[4]||a[5],isLsp9Vault:n[6],isERC721:n[7]}]}}))}));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.Z)((function(e,t){var n;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,new t.eth.Contract(u.wq,u.MX).methods.aggregate(e).call()];case 1:return[2,a.sent().returnData];case 2:return n=a.sent(),console.warn("could not aggregate results: ",n),[2,["",""]];case 3:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();function p(e,t,n){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)((function(e,t,n){var a,s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return a=new n.eth.Contract(u.uZ),s=t.map((function(t){return[e,a.methods.supportsInterface(t).encodeABI()]})),[4,f(s,n)];case 1:return[2,r.sent().map((function(e){try{return n.eth.abi.decodeParameter("bool",e)}catch(t){return console.warn("Could not decode `supportsInterface` return data from aggregate call as `boolean`: ",t),!1}}))]}}))}))).apply(this,arguments)}var y=function(){var e=(0,a.Z)((function(e,t){var n,a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:n=new t.eth.Contract(u.J7,e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.methods.VERSION().call()];case 2:return""==(a=r.sent())?[2,"unknown"]:[2,a];case 3:return r.sent(),console.warn("Could not fetch smart contract version for contract at address ",e),[2,"unknown"];case 4:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();function b(e,t){return v.apply(this,arguments)}function v(){return(v=(0,a.Z)((function(e,t){var n;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return[4,t.eth.getCode(e)];case 1:return a.sent()!=l.wv?[2,!1]:[4,t.eth.getStorageAt(e,0)];case 2:return n=a.sent(),[2,t.eth.abi.decodeParameter("address",n).implementationAddress==l.BL]}}))}))).apply(this,arguments)}},46601:function(){},89214:function(){},85568:function(){},52361:function(){},94616:function(){}},function(e){e.O(0,[543,438,655,290,774,888,179],(function(){return t=7205,e(e.s=t);var t}));var t=e.O();_N_E=t}]);