(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[343],{16513:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>f});var n=r(37876),a=r(77328),l=r.n(a),t=r(14232),i=r(1846),c=r(38391),d=r(79023);let o=()=>{let e=(0,c.A)(),[s,r]=(0,t.useState)(""),[a,l]=(0,t.useState)(""),[o,h]=(0,t.useState)(""),[m,u]=(0,t.useState)(""),[x,j]=(0,t.useState)(!1),[p,N]=(0,t.useState)(!1),g=async()=>{if(!e)return;let r=new e.eth.Contract(i.HV,e.utils.toChecksumAddress(s)),n=await r.methods.supportsInterface("0x6f4df48b").call(),l=await r.methods.supportsInterface("0xc403d48f").call();n||l?(u(await r.methods.getNonce(a,o).call()),j(!0),N(!1)):(j(!1),N(!0))};return(0,n.jsxs)("div",{className:"container mt-5",children:[(0,n.jsx)("h2",{className:"title is-2",children:"Nonce"}),(0,n.jsx)("article",{className:"message is-info",children:(0,n.jsxs)("div",{className:"message-body",children:["Retrieve the nonce of a"," ",(0,n.jsx)("a",{href:"https://docs.lukso.tech/standards/accounts/lsp0-erc725account",target:"_blank",rel:"noreferrer",className:"ml-1",children:"LSP0 ERC725Account"}),"'s"," ",(0,n.jsx)("a",{href:"https://docs.lukso.tech/standards/access-control/lsp6-key-manager#introduction",target:"_blank",rel:"noreferrer",children:"controller address"})," ","for a specific"," ",(0,n.jsx)("a",{href:"https://docs.lukso.tech/standards/access-control/lsp6-key-manager",target:"_blank",rel:"noreferrer",children:"LSP6 KeyManager"})," ","smart contract."]})}),(0,n.jsx)("article",{className:"message",children:(0,n.jsxs)("div",{className:"message-body",children:["It's calling the"," ",(0,n.jsx)("a",{href:"".concat(d.d8.LSP25,"#getnonce"),target:"_blank",rel:"noreferrer",children:"getNonce"})," ","function of the"," ",(0,n.jsx)("a",{href:d.d8.LSP25,target:"_blank",rel:"noreferrer",children:"LSP25 ExecuteRelayCall"})," ","standardization that every"," ",(0,n.jsx)("a",{href:"https://docs.lukso.tech/standards/access-control/lsp6-key-manager",target:"_blank",rel:"noreferrer",children:"LSP6 KeyManager"})," ","inherits."]})}),(0,n.jsxs)("div",{className:"columns mt-2",children:[(0,n.jsx)("div",{className:"column",children:(0,n.jsx)("div",{className:"field",children:(0,n.jsxs)("p",{className:"control has-icons-left",children:[(0,n.jsx)("input",{className:"input",type:"text",placeholder:"Key Manager Address",onChange:e=>{r(e.target.value)}}),(0,n.jsx)("span",{className:"icon is-small is-left",children:"\uD83D\uDD10"})]})})}),(0,n.jsx)("div",{className:"column",children:(0,n.jsx)("div",{className:"field",children:(0,n.jsxs)("p",{className:"control has-icons-left",children:[(0,n.jsx)("input",{className:"input",type:"text",placeholder:"Controller Address",onChange:e=>l(e.target.value)}),(0,n.jsx)("span",{className:"icon is-small is-left",children:"➡️ "})]})})}),(0,n.jsx)("div",{className:"column",children:(0,n.jsx)("div",{className:"field",children:(0,n.jsxs)("p",{className:"control has-icons-left",children:[(0,n.jsx)("input",{className:"input",type:"text",placeholder:"Channel ID",onChange:e=>h(e.target.value)}),(0,n.jsx)("span",{className:"icon is-small is-left",children:"\uD83D\uDEAA"})]})})}),(0,n.jsx)("div",{className:"column",children:(0,n.jsx)("button",{className:"button is-success",onClick:async()=>{await g()},children:"Get Nonce"})})]}),(0,n.jsxs)("div",{className:"notification is-danger is-light",style:{display:p?"block":"none"},children:["address ",(0,n.jsx)("code",{children:s})," is not a KeyManager"]}),(0,n.jsxs)("div",{className:"notification is-success is-light",style:{display:x?"block":"none"},children:["Nonce = ",(0,n.jsx)("code",{children:m})]})]})};var h=r(23346),m=r(91751),u=r(55860),x=r(65859),j=r(24198),p=r(22363);let N=e=>{let{permissions:s,color:r,decodedPermissions:a,handlePermissionClick:l}=e;return(0,n.jsx)("div",{className:"buttons",children:s.map(e=>(0,n.jsx)("button",{className:"button ".concat(r," ").concat(!a[e]&&"is-outlined"),onClick:s=>{s.preventDefault(),l(e)},children:e},e))})};var g=r(36397);let P=m.find(e=>e.name.startsWith("AddressPermissions:Permissions")),E=()=>{let e="0x0000000000000000000000000000000000000000000000000000000000000001",[s,r]=(0,t.useState)(""),[a,l]=(0,t.useState)(e),[i,c]=(0,t.useState)(h.Ay.decodePermissions(e)),[o,m]=(0,t.useState)(),E=e=>{console.log("updatedDecodedPermissions",e),i[e]=!i[e],c(i),l(h.Ay.encodePermissions(i))};return(0,n.jsxs)("div",{className:"container container-key-manager",children:[(0,n.jsx)("h2",{className:"title is-2",children:"Permissions"}),(0,n.jsx)(g.A,{erc725jsMethod:["encodePermissions","decodePermissions"],description:(0,n.jsxs)(n.Fragment,{children:["Encode and decode"," ",(0,n.jsx)("a",{href:"".concat(d.Ks.LSP6,"#address-permissions"),target:"_blank",rel:"noreferrer",children:"permissions"})," ","based on the"," ",(0,n.jsx)("a",{href:d.Ks.LSP6,target:"_blank",rel:"noreferrer",children:"LSP6 Key Manager"})," ","standard."]})}),(0,n.jsxs)("div",{className:"columns mx-1 p-4 has-background-light",children:[(0,n.jsxs)("div",{className:"column",children:[(0,n.jsx)("h5",{className:"title is-5",children:"Encoded Data Key / Value Permissions"}),P&&(0,n.jsx)(p.A,{schema:P}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"label is-normal",children:"Controller Address"}),(0,n.jsx)("div",{className:"control",children:(0,n.jsx)("input",{className:"input is-normal",type:"text",placeholder:"enter controller address",value:s,onChange:e=>r(e.target.value)})})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{className:"label is-normal",children:"Encoded Permissions"}),(0,n.jsx)("div",{className:"control",children:(0,n.jsx)("input",{className:"input is-normal",type:"text",placeholder:"0x0000000000000000000000000000000000000000000000000000000000000001",value:a,onChange:e=>(e=>{if(!a||!(0,x.q)(a)||66!==a.length)return void alert("Invalid encoded permissions. Must be a 32 bytes hex string");try{l(e),c(h.Ay.decodePermissions(e))}catch(e){console.log(e.message)}})(e.target.value)})})]})]}),(0,n.jsxs)("div",{className:"column",children:[(0,n.jsx)("button",{className:"button is-primary",type:"button",onClick:()=>{if(!P)return void alert("AddressPermissions schema not found");if(!(0,u.P)(s.toLowerCase()))return void alert("Please enter a valid controller address");if(!a||!(0,x.q)(a)||66!==a.length)return void alert("Invalid encoded permissions. Must be a 32 bytes hex string");try{let e=h.Ay.encodeData([{keyName:"AddressPermissions:Permissions:<address>",dynamicKeyParts:s,value:a}],[P]);m({key:e.keys[0],value:e.values[0]})}catch(e){console.error("Error encoding data:",e),m("Error: ".concat(e.message))}},disabled:!s||!a,children:"Encode Data Key / Value Permissions"}),o&&(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("h6",{className:"title is-6",children:"Encoded Result:"}),(0,n.jsx)(j.A,{sourceCode:JSON.stringify(o,null,2),readOnly:!0})]})]})]}),(0,n.jsxs)("div",{className:"columns",children:[(0,n.jsx)("div",{className:"column is-two-thirds",children:(0,n.jsxs)("table",{className:"table is-fullwidth mb-4",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Category"}),(0,n.jsx)("th",{children:"Permissions"})]})}),(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{className:"mb-2 ",children:"Administration & Ownership"})}),(0,n.jsx)("td",{children:(0,n.jsx)(N,{permissions:["CHANGEOWNER","ADDCONTROLLER","EDITPERMISSIONS"],color:"is-red",decodedPermissions:i,handlePermissionClick:E})})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{className:"mb-2 ",children:"LSP17 Extensions"})}),(0,n.jsxs)("td",{children:[" ",(0,n.jsx)(N,{permissions:["ADDEXTENSIONS","CHANGEEXTENSIONS"],color:"is-extension",decodedPermissions:i,handlePermissionClick:E})]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{className:"mb-2 ",children:"LSP1 Universal Receivers Delegates"})}),(0,n.jsxs)("td",{children:[" ",(0,n.jsx)(N,{permissions:["ADDUNIVERSALRECEIVERDELEGATE","CHANGEUNIVERSALRECEIVERDELEGATE"],color:"is-fuschia",decodedPermissions:i,handlePermissionClick:E})]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{className:"mb-2 ",children:"Contract Interactions"})}),(0,n.jsxs)("td",{children:[" ",(0,n.jsx)(N,{permissions:["SUPER_TRANSFERVALUE","TRANSFERVALUE","SUPER_CALL","CALL","SUPER_STATICCALL","STATICCALL","DEPLOY"],color:"is-yellow",decodedPermissions:i,handlePermissionClick:E}),(0,n.jsx)(N,{permissions:["EXECUTE_RELAY_CALL"],color:"is-orange",decodedPermissions:i,handlePermissionClick:E}),(0,n.jsx)(N,{permissions:["SUPER_DELEGATECALL","DELEGATECALL","REENTRANCY"],color:"is-red",decodedPermissions:i,handlePermissionClick:E}),(0,n.jsx)(N,{permissions:["ERC4337_PERMISSION"],color:"is-grey",decodedPermissions:i,handlePermissionClick:E})]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{className:"mb-2 ",children:"Metadata"})}),(0,n.jsxs)("td",{children:[" ",(0,n.jsx)(N,{permissions:["SUPER_SETDATA","SETDATA"],color:"is-blue",decodedPermissions:i,handlePermissionClick:E})]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{className:"mb-2 ",children:"Signing Verification"})}),(0,n.jsxs)("td",{children:[" ",(0,n.jsx)(N,{permissions:["SIGN","ENCRYPT","DECRYPT"],color:"is-purple",decodedPermissions:i,handlePermissionClick:E})]})]})]})]})}),(0,n.jsx)("div",{className:"column is-one-third",children:(0,n.jsx)("div",{className:"mb-4 p-4 has-background-light",children:(0,n.jsx)(j.A,{sourceCode:JSON.stringify(i,void 0,2),readOnly:!0})})})]})]})},f=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l(),{children:(0,n.jsx)("title",{children:"Key Manager - ERC725 Tools"})}),(0,n.jsx)(E,{}),(0,n.jsx)(o,{})]})},22363:(e,s,r)=>{"use strict";r.d(s,{A:()=>l});var n=r(37876);r(14232);var a=r(24198);let l=e=>{let{schema:s}=e;return(0,n.jsxs)("details",{className:"has-background-link-light p-2 is-clickable m-4 is-size-6 has-text-weight-light",children:[(0,n.jsxs)("summary",{className:"has-text-weight-semibold",children:["See LSP2 JSON Schema of ",(0,n.jsx)("code",{children:s.name})]}),(0,n.jsx)(a.A,{sourceCode:JSON.stringify(s,null,4),readOnly:!0})]})}},24198:(e,s,r)=>{"use strict";r.d(s,{A:()=>h});var n=r(37876),a=r(14232),l=r(18847),t=r.n(l),i=r(15464),c=r(47088),d=r(90558);let o=t()(()=>r.e(486).then(r.bind(r,28486)),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),h=e=>{let{sourceCode:s,handleChange:r,readOnly:l}=e,t=(0,a.useMemo)(()=>(0,i.Pq)(),[]),h=(0,a.useMemo)(()=>[t,d.Lz.lineWrapping],[t]);return(0,n.jsx)(o,{value:s,theme:c.al,readOnly:l,basicSetup:{lineNumbers:!1,foldGutter:!1},extensions:h,onChange:r&&(e=>r(e)),style:{width:"100%"}})}},36397:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var n=r(37876);r(14232);var a=r(79023);let l=e=>{let{methods:s}=e;return(0,n.jsx)(n.Fragment,{children:s.map((e,r)=>{let l=a.Cq[e],t=r===s.length-1,i=r===s.length-2;return(0,n.jsxs)("span",{children:[(0,n.jsx)("a",{href:l,target:"_blank",rel:"noreferrer",children:(0,n.jsxs)("code",{children:[e,"(…)"]})}),i?" and ":t?" ":", "]},e)})})},t=e=>{let{description:s,erc725jsMethod:r}=e,t=Array.isArray(r)?r:[r];return(0,n.jsx)("article",{className:"message is-info content",children:(0,n.jsxs)("div",{className:"message-body",children:[(0,n.jsx)("p",{children:s}),(0,n.jsxs)("p",{children:["It uses the ",(0,n.jsx)(l,{methods:t}),"function",t.length>1&&"s"," of the"," ",(0,n.jsx)("a",{href:a.YP.erc725js,target:"_blank",rel:"noreferrer",children:"erc725.js"})," ","library."]})]})})}},38391:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var n=r(14232),a=r(34912),l=r.n(a),t=r(13657);function i(){let[e,s]=(0,n.useState)(),{network:r}=(0,n.useContext)(t.u);return(0,n.useEffect)(()=>{(async()=>new(l())(r.rpc))().then(e=>{s(e)})},[r]),e}},79023:(e,s,r)=>{"use strict";r.d(s,{Cq:()=>i,Ks:()=>l,YP:()=>c,Yy:()=>n,d8:()=>a});let n="https://api.universalprofile.cloud/ipfs",a={ERC725Y:"https://github.com/ERC725Alliance/ERC725/blob/develop/docs/ERC-725.md#erc725y",LSP2:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md",LSP25:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-25-ExecuteRelayCall.md",LSP26:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-26-FollowerSystem.md"},l={ERC725Y:"https://docs.lukso.tech/standards/universal-profile/lsp0-erc725account#erc725y",LSP0:"https://docs.lukso.tech/standards/accounts/lsp0-erc725account/",LSP2:"https://docs.lukso.tech/standards/metadata/lsp2-json-schema/",LSP6:"https://docs.lukso.tech/standards/access-control/lsp6-key-manager/"},t="https://docs.lukso.tech/tools/dapps/erc725js/methods/",i={fetchData:"".concat(t,"#fetchdata"),getData:"".concat(t,"#getdata"),encodeData:"".concat(t,"#encodedata"),decodeData:"".concat(t,"#decodedata"),encodePermissions:"".concat(t,"#encodepermissions"),decodePermissions:"".concat(t,"#decodepermissions")},c={erc725js:"https://www.npmjs.com/package/@erc725/erc725.js"}},98156:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/key-manager",function(){return r(16513)}])}},e=>{e.O(0,[754,212,346,937,612,636,593,792],()=>e(e.s=98156)),_N_E=e.O()}]);